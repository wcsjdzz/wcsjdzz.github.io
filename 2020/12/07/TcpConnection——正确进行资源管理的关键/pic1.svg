<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="210mm"
   height="240mm"
   viewBox="0 0 210 240"
   version="1.1"
   id="svg8"
   inkscape:version="1.0 (4035a4fb49, 2020-05-01)"
   sodipodi:docname="pic1.svg">
  <defs
     id="defs2">
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="marker1397"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1395"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.4,0,0,-0.4,-4,0)" />
    </marker>
    <marker
       inkscape:collect="always"
       inkscape:isstock="true"
       style="overflow:visible"
       id="marker895"
       refX="0"
       refY="0"
       orient="auto"
       inkscape:stockid="Arrow1Mend">
      <path
         transform="matrix(-0.4,0,0,-0.4,-4,0)"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         id="path893" />
    </marker>
    <marker
       inkscape:collect="always"
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="marker1401"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1399"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.4,0,0,-0.4,-4,0)" />
    </marker>
    <marker
       inkscape:isstock="true"
       style="overflow:visible"
       id="marker1277"
       refX="0"
       refY="0"
       orient="auto"
       inkscape:stockid="Arrow1Mend"
       inkscape:collect="always">
      <path
         transform="matrix(-0.4,0,0,-0.4,-4,0)"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         id="path1275" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="marker1217"
       style="overflow:visible"
       inkscape:isstock="true"
       inkscape:collect="always">
      <path
         id="path1215"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.4,0,0,-0.4,-4,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Mend"
       style="overflow:visible"
       inkscape:isstock="true"
       inkscape:collect="always">
      <path
         id="path844"
         d="M 0,0 5,-5 -12.5,0 5,5 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.4,0,0,-0.4,-4,0)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.9899495"
     inkscape:cx="620.92417"
     inkscape:cy="526.16905"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     inkscape:document-rotation="0"
     showgrid="false"
     inkscape:window-width="2560"
     inkscape:window-height="1506"
     inkscape:window-x="-11"
     inkscape:window-y="-11"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata5">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="图层 1"
     inkscape:groupmode="layer"
     id="layer1">
    <g
       transform="translate(0,-41.804168)"
       id="g1547">
      <rect
         style="opacity:0.988532;fill:#ff6600;fill-opacity:0.317919;stroke-width:0.264999;stroke-linejoin:bevel;paint-order:stroke fill markers"
         id="rect883"
         width="169.1366"
         height="81.153954"
         x="25.637306"
         y="142.60826"
         ry="8.1264877"
         rx="8.1264877" />
      <rect
         style="opacity:0.988532;fill:#e3e2db;fill-opacity:0.317919;stroke:#000000;stroke-width:0.264999;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;paint-order:stroke fill markers"
         id="rect977"
         width="170.03212"
         height="174.42465"
         x="24.856953"
         y="92.251167"
         rx="5.1026745"
         ry="5.1026745" />
      <rect
         ry="8.4099703"
         y="113.44847"
         x="25.390219"
         height="110.78591"
         width="169.17845"
         id="rect1373"
         style="opacity:0.988532;fill:#ffff00;fill-opacity:0.37291;stroke:#000000;stroke-width:0.3;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:0.9, 0.3;stroke-dashoffset:0;paint-order:stroke fill markers"
         rx="8.4099703" />
      <path
         id="path833"
         d="M 6.992559,78.549192 H 85.454708 V 116.81567"
         style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:0.265, 0.529999;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend)" />
      <text
         id="text1125"
         y="63.908108"
         x="9.2322683"
         style="font-style:italic;font-size:8.35664px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="stroke-width:0.264583"
           y="63.908108"
           x="9.2322683"
           id="tspan1123"
           sodipodi:role="line">TCP disconnected</tspan></text>
      <text
         id="text1129"
         y="75.106697"
         x="22.510584"
         style="font-style:italic;font-size:8.35664px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="stroke-width:0.264583"
           y="75.106697"
           x="22.510584"
           id="tspan1127"
           sodipodi:role="line">from peer</tspan></text>
      <text
         id="text1177"
         y="123.84715"
         x="54.719822"
         style="font-style:italic;font-size:8.35664px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           id="tspan1179"
           style="stroke-width:0.264583"
           y="123.84715"
           x="54.719822"
           sodipodi:role="line" /></text>
      <path
         id="path1183"
         d="m 85.382582,125.84689 v 10.53199 h -29.99618 v 10.39868"
         style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1217)" />
      <path
         id="path1273"
         d="m 85.373753,136.42755 h 31.595757 v 10.58643 19.76104 6.53249 9.83637"
         style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1277)" />
      <text
         id="text1323"
         y="152.08356"
         x="36.375488"
         style="font-style:italic;font-size:8.35664px;line-height:0;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="font-size:6.36579px;line-height:1;stroke-width:0.264583"
           y="152.08356"
           x="36.375488"
           id="tspan1321"
           sodipodi:role="line">Erase TcpConnectionPtr</tspan><tspan
           id="tspan1325"
           style="font-size:6.36579px;line-height:1;stroke-width:0.264583"
           y="158.44934"
           x="36.375488"
           sodipodi:role="line">in TcpServer</tspan></text>
      <text
         id="text1365"
         y="187.40448"
         x="80.575752"
         style="font-style:italic;font-size:8.35664px;line-height:0;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.36577px;line-height:1;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.264583"
           y="187.40448"
           x="80.575752"
           id="tspan1363"
           sodipodi:role="line">Extend life-circle</tspan><tspan
           id="tspan1367"
           style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.36577px;line-height:1;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.264583"
           y="193.77025"
           x="80.575752"
           sodipodi:role="line">of TcpConnection for secirity</tspan></text>
      <text
         id="text1371"
         y="122.43469"
         x="50.778278"
         style="font-style:italic;font-size:6.36576px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="stroke-width:0.264583"
           y="122.43469"
           x="50.778278"
           id="tspan1369"
           sodipodi:role="line">Disable Channel event</tspan></text>
      <text
         id="text1377"
         y="112.67524"
         x="137.26932"
         style="font-style:italic;font-size:4.87262px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         xml:space="preserve"><tspan
           style="font-size:4.87262px;stroke-width:0.264583"
           y="112.67524"
           x="137.26932"
           id="tspan1375"
           sodipodi:role="line">Channel::handleClose</tspan></text>
      <path
         id="path1397"
         d="m 55.241591,159.48238 v 7.73006 h 60.709179"
         style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:0.265, 0.265;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker1401)" />
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:4.37493px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="148.50717"
         y="135.32349"
         id="text887"><tspan
           sodipodi:role="line"
           id="tspan885"
           x="148.50717"
           y="135.32349"
           style="font-size:4.37493px;stroke-width:0.264583">TcpServer::</tspan><tspan
           sodipodi:role="line"
           x="148.50717"
           y="140.79214"
           style="font-size:4.37493px;stroke-width:0.264583"
           id="tspan889">removeConnection</tspan></text>
      <path
         style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker895)"
         d="m 117.27052,194.83321 v 14.51272"
         id="path891" />
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:4.47943px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="92.588181"
         y="248.45366"
         id="text941"><tspan
           sodipodi:role="line"
           id="tspan939"
           x="92.588181"
           y="248.45366"
           style="font-size:4.47943px;stroke-width:0.264583">Remove pollfds</tspan><tspan
           sodipodi:role="line"
           x="92.588181"
           y="254.05295"
           style="font-size:4.47943px;stroke-width:0.264583"
           id="tspan943">and *Channel in Poller</tspan></text>
      <rect
         style="opacity:0.988532;fill:#ff0000;fill-opacity:0.317919;stroke-width:0.264999;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;paint-order:stroke fill markers"
         id="rect945"
         width="168.16257"
         height="14.398169"
         x="26.191952"
         y="241.3196"
         ry="5.1026788"
         rx="5.1026788" />
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:4.47943px;line-height:1;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="141.88206"
         y="236.06699"
         id="text949"><tspan
           sodipodi:role="line"
           id="tspan947"
           x="141.88206"
           y="236.06699"
           style="font-size:4.47943px;stroke-width:0.264583">TcpConnection::</tspan><tspan
           sodipodi:role="line"
           x="141.88206"
           y="240.54642"
           style="font-size:4.47943px;stroke-width:0.264583"
           id="tspan951">connectionDestroyed</tspan></text>
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:4.47943px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="153.77388"
         y="90.118103"
         id="text981"><tspan
           sodipodi:role="line"
           id="tspan979"
           x="153.77388"
           y="90.118103"
           style="font-size:4.47943px;stroke-width:0.264583">EventLoop::loop</tspan></text>
      <rect
         rx="5.1026788"
         ry="5.1026788"
         y="209.56956"
         x="26.191952"
         height="14.398169"
         width="168.16257"
         id="rect1381"
         style="opacity:0.988532;fill:#ff2a2a;fill-opacity:0.317919;stroke-width:0.264999;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;paint-order:stroke fill markers" />
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:4.23333px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="33.356411"
         y="218.84821"
         id="text1385"><tspan
           sodipodi:role="line"
           id="tspan1383"
           x="33.356411"
           y="218.84821"
           style="font-size:4.23333px;stroke-width:0.264583">(This is the old life-cycle of TcpConnection, but now it extends.)</tspan></text>
      <path
         id="path1393"
         d="m 117.27052,225.52489 v 14.51272"
         style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker1397)" />
      <text
         xml:space="preserve"
         style="font-style:italic;font-size:5.92315px;line-height:1.25;font-family:Consolas;-inkscape-font-specification:'Consolas, Italic';stroke-width:0.264583"
         x="58.208332"
         y="150.8125"
         id="text1467"><tspan
           sodipodi:role="line"
           id="tspan1465"
           x="58.208332"
           y="150.8125"
           style="stroke-width:0.264583" /></text>
    </g>
  </g>
</svg>
